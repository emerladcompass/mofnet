<!doctype html>
<html lang="en" class="h-full">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MOFNet Dashboard</title>
  <script src="/_sdk/element_sdk.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
<meta name="theme-color" content="#003399">
<meta name="mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <link rel="manifest" href="manifest.json">
  <style>
    body { box-sizing: border-box; }
    .smooth-scroll { scroll-behavior: smooth; }
    
    /* Demo Section Styles */
    .demo-gradient {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    }
    
    .demo-card {
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.2);
    }
    
    .risk-low { color: #10b981; }
    .risk-medium { color: #f59e0b; }
    .risk-high { color: #ef4444; }
    
    .vital-input {
      width: 100%;
      padding: 0.75rem;
      border: 2px solid #e5e7eb;
      border-radius: 0.5rem;
      font-size: 1rem;
      transition: border-color 0.3s;
    }
    
    .vital-input:focus {
      outline: none;
      border-color: #3b82f6;
      box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
    }
    
    .analyze-btn {
      background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
      color: white;
      padding: 1rem 2rem;
      border-radius: 0.5rem;
      font-weight: 600;
      font-size: 1.125rem;
      border: none;
      cursor: pointer;
      transition: all 0.3s;
    }
    
    .analyze-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 10px 25px rgba(59, 130, 246, 0.3);
    }
    
    .analyze-btn:disabled {
      opacity: 0.7;
      cursor: not-allowed;
    }
    
    .risk-bar {
      height: 0.5rem;
      background: #e5e7eb;
      border-radius: 0.25rem;
      overflow: hidden;
    }
    
    .risk-fill {
      height: 100%;
      border-radius: 0.25rem;
      transition: width 0.5s ease;
    }
    
    /* QR Code Section Styles */
    .qr-code-container {
      background: linear-gradient(135deg, #1e3a8a 0%, #3b82f6 100%);
      border-radius: 1.5rem;
      padding: 2rem;
      box-shadow: 0 20px 60px rgba(59, 130, 246, 0.3);
    }
    
    .qr-card {
      background: white;
      border-radius: 1rem;
      padding: 2rem;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
      transition: transform 0.3s ease;
    }
    
    .qr-card:hover {
      transform: translateY(-5px);
    }
    
    .download-badge {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      padding: 0.5rem 1rem;
      background: #f0f9ff;
      border: 2px solid #3b82f6;
      border-radius: 0.5rem;
      font-weight: 600;
      color: #1e40af;
      margin: 0.25rem;
    }
    
     .hero-grad {
      background: linear-gradient(135deg, #ffffff 0%, #ffffff 100%);
    }
    
    .hero-gradient {
      background: linear-gradient(135deg, #1E94DF 0%, #3b82f6 100%);
    }
    
    .card {
      background: white;
      border-radius: 1.5rem;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.15);
      overflow: hidden;
    }
    
    .input-field {
      width: 100%;
      padding: 1rem;
      border: 2px solid #e5e7eb;
      border-radius: 0.75rem;
      font-size: 1.125rem;
      transition: all 0.3s;
      background: #f9fafb;
    }
    
    .input-field:focus {
      outline: none;
      border-color: #3b82f6;
      background: white;
      box-shadow: 0 0 0 4px rgba(59, 130, 246, 0.1);
    }
    
    .input-label {
      display: block;
      font-weight: 600;
      color: #374151;
      margin-bottom: 0.5rem;
      font-size: 0.95rem;
    }
    
    .analyze-button {
      background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
      color: white;
      padding: 1.25rem 2.5rem;
      border-radius: 1rem;
      font-weight: 700;
      font-size: 1.25rem;
      border: none;
      cursor: pointer;
      transition: all 0.3s;
      box-shadow: 0 10px 30px rgba(59, 130, 246, 0.4);
      width: 100%;
    }
    
    .analyze-button:hover {
      transform: translateY(-3px);
      box-shadow: 0 15px 40px rgba(59, 130, 246, 0.5);
    }
    
    .analyze-button:active {
      transform: translateY(-1px);
    }
    
    .analyze-button:disabled {
      opacity: 0.6;
      cursor: not-allowed;
      transform: none;
    }
    
    .result-card {
      background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
      border: 2px solid #bae6fd;
      border-radius: 1rem;
      padding: 1.5rem;
      margin-bottom: 1.5rem;
    }
    
    .score-display {
      font-size: 4rem;
      font-weight: 800;
      line-height: 1;
      text-align: center;
      margin: 1rem 0;
    }
    
    .score-excellent { color: #10b981; }
    .score-good { color: #3b82f6; }
    .score-moderate { color: #f59e0b; }
    .score-poor { color: #ef4444; }
    
    .progress-bar {
      height: 1.5rem;
      background: #e5e7eb;
      border-radius: 1rem;
      overflow: hidden;
      position: relative;
    }
    
    .progress-fill {
      height: 100%;
      border-radius: 1rem;
      transition: width 1s cubic-bezier(0.4, 0, 0.2, 1);
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-weight: 700;
      font-size: 0.875rem;
    }
    
    .badge {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      padding: 0.75rem 1.25rem;
      border-radius: 2rem;
      font-weight: 600;
      font-size: 1rem;
    }
    
    .badge-excellent {
      background: #d1fae5;
      color: #065f46;
    }
    
    .badge-good {
      background: #dbeafe;
      color: #1e40af;
    }
    
    .badge-moderate {
      background: #fef3c7;
      color: #92400e;
    }
    
    .badge-poor {
      background: #fee2e2;
      color: #991b1b;
    }
    
    .vitals-card {
      background: white;
      border: 2px solid #e5e7eb;
      border-radius: 0.75rem;
      padding: 1rem;
      text-align: center;
      transition: all 0.3s;
    }
    
    .vitals-card:hover {
      border-color: #3b82f6;
      box-shadow: 0 4px 12px rgba(59, 130, 246, 0.2);
    }
    
    .pulse {
      animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
    }
    
    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.5; }
    }
    
    .fade-in {
      animation: fadeIn 0.5s ease-in;
    }
    
    @media (max-width: 768px) {
      .vitals-grid {
        grid-template-columns: 1fr !important;
      }
      
      .download-grid {
        grid-template-columns: 1fr !important;
      }
    }
  </style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
  
  <script>
    const manifest = {
      "name": "MOFNet Clinical",
      "display": "standalone",
      "theme_color": "#003399"
    };
    localStorage.setItem('mofnet_pwa', JSON.stringify(manifest));
  </script>
</head>

<body class="h-full">
<div id="app" class="w-full h-full overflow-auto">
  <nav id="nav" class="w-full py-4 px-6 shadow-md sticky top-0 z-50">
    <div class="max-w-7xl mx-auto flex justify-between items-center">
      <div class="flex items-center gap-3">
        <svg width="40" height="40" viewbox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
          <rect width="40" height="40" rx="8" id="logo-bg" />
          <path d="M20 10V30M10 20H30" id="logo-cross" stroke-width="3" stroke-linecap="round" />
        </svg>
        <div>
          <div id="hospital-name" class="text-xl font-bold">MOFNet</div>
          <div id="tagline" class="text-sm opacity-80">Testing across 4 tertiary care centers</div>
        </div>
      </div>
      <button id="cta-nav-button" class="px-6 py-2 rounded-lg font-semibold transition-colors">View Documentation</button>
    </div>
  </nav>

  <header id="hero" class="w-full py-20 px-6">
    <div class="max-w-7xl mx-auto text-center">
      <h1 id="hero-heading" class="text-5xl font-bold mb-4">Clinically Validated</h1>
      <p id="hero-subheading" class="text-xl mb-8 opacity-90">Lead Time: 11.3h | AUC: 0.893</p>
      <button id="cta-button" class="px-8 py-4 rounded-lg text-lg font-semibold shadow-lg transition-all hover:shadow-xl hover:scale-105">Install via PyPI</button>
    </div>
  </header>

  <section id="services" class="w-full py-16 px-6">
    <div class="max-w-7xl mx-auto">
      <h2 id="services-heading" class="text-4xl font-bold text-center mb-12">Performance Metrics</h2>
      <div class="grid md:grid-cols-3 gap-8">

        <!-- Early MOF Detection Sensitivity -->
        <div class="service-card p-8 rounded-xl shadow-lg transition-transform hover:scale-105">
          <div class="mb-4 flex justify-center items-center">
            <svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M24 42S12 30 12 18C12 12 18 8 24 12C30 8 36 12 36 18C36 30 24 42 24 42Z" fill="#3B82F6"/>
              <path d="M24 18V28M18 24H30" stroke="white" stroke-width="2" stroke-linecap="round"/>
            </svg>
          </div>
          <h3 id="service-1-title" class="text-2xl font-bold mb-3">87.9%</h3>
          <p id="service-1-desc" class="opacity-80">Early MOF Detection Sensitivity</p>
        </div>

        <!-- Patients Validated -->
        <div class="service-card p-8 rounded-xl shadow-lg transition-transform hover:scale-105">
          <div class="mb-4 flex justify-center items-center">
            <svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
              <rect x="12" y="10" width="24" height="28" rx="4" fill="#10B981"/>
              <path d="M16 20H32M16 28H32M16 36H28" stroke="white" stroke-width="2" stroke-linecap="round"/>
            </svg>
          </div>
          <h3 id="service-2-title" class="text-2xl font-bold mb-3">1,328</h3>
          <p id="service-2-desc" class="opacity-80">Patients Validated</p>
        </div>

        <!-- Early Warning Time -->
        <div class="service-card p-8 rounded-xl shadow-lg transition-transform hover:scale-105">
          <div class="mb-4 flex justify-center items-center">
            <svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
              <circle cx="24" cy="24" r="20" stroke="#F59E0B" stroke-width="3"/>
              <path d="M24 12V24L32 28" stroke="#F59E0B" stroke-width="3" stroke-linecap="round"/>
            </svg>
          </div>
          <h3 id="service-3-title" class="text-2xl font-bold mb-3">11.3h</h3>
          <p id="service-3-desc" class="opacity-80">Median Early Warning Time</p>
        </div>

      </div>
    </div>
  </section>
  
<!-- Live Demo Section -->

  <!-- Live Demo Section -->
  <section id="live-demo" class="w-full py-16 px-6 demo-gradient">
    <div class="max-w-6xl mx-auto">
      <h2 class="text-4xl font-bold text-center mb-4 text-white">ü©∫ Live Clinical Demo</h2>
      <p class="text-xl text-center mb-12 text-white/90">Test MOFNet in real-time with patient vitals</p>
      
      <div class="demo-card rounded-2xl p-6 md:p-8 shadow-2xl">
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
          
          <!-- Input Form -->
          <div>
            <h3 class="text-2xl font-bold mb-6 text-gray-800">Patient Vitals</h3>
            
            <form id="mofnet-form" class="space-y-6">
              <div class="grid vitals-grid grid-cols-2 gap-4">
                <div>
                  <label class="block text-sm font-medium text-gray-700 mb-2">
                    Heart Rate (bpm)
                  </label>
                  <input type="number" id="hr-input" value="80" min="40" max="200"
                         class="vital-input" required>
                </div>
                
                <div>
                  <label class="block text-sm font-medium text-gray-700 mb-2">
                    Systolic BP (mmHg)
                  </label>
                  <input type="number" id="sbp-input" value="120" min="60" max="250"
                         class="vital-input" required>
                </div>
                
                <div>
                  <label class="block text-sm font-medium text-gray-700 mb-2">
                    Diastolic BP (mmHg)
                  </label>
                  <input type="number" id="dbp-input" value="80" min="40" max="150"
                         class="vital-input" required>
                </div>
                
                <div>
                  <label class="block text-sm font-medium text-gray-700 mb-2">
                    Respiratory Rate
                  </label>
                  <input type="number" id="rr-input" value="16" min="8" max="40"
                         class="vital-input" required>
                </div>
              </div>
              
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-2">
                  Oxygen Saturation (%)
                </label>
                <input type="number" id="spo2-input" value="98" min="75" max="100"
                       class="vital-input w-full" required>
              </div>
              
              <button type="submit" id="analyze-btn" class="analyze-btn w-full">
                üî¨ Analyze Patient
              </button>
            </form>
            
            <div class="mt-8 p-4 bg-blue-50 rounded-lg">
              <h4 class="font-bold text-gray-700 mb-2">üí° How it works</h4>
              <p class="text-sm text-gray-600">
                MOFNet calculates the Physiological Resilience Index (PRI) using 
                heart rate, blood pressure, respiratory rate, and oxygen saturation 
                to predict multi-organ failure risk.
              </p>
            </div>
          </div>
          
          <!-- Results Display -   API -->
          <div>
            <h3 class="text-2xl font-bold mb-6 text-gray-800">Analysis Results</h3>
            
            <div id="results-placeholder" class="text-center py-12">
              <div class="text-gray-400 mb-4">
                <svg class="w-16 h-16 mx-auto" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" 
                        d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                </svg>
              </div>
              <p class="text-gray-500">Enter patient vitals and click "Analyze" to see results</p>
            </div>
            
            <div id="results-container" class="hidden">
              <!-- PRI Score -->
              <div class="mb-8">
                <div class="flex justify-between items-center mb-2">
                  <span class="text-gray-700 font-medium">PRI Score</span>
                  <span id="pri-score" class="text-3xl font-bold text-blue-600">0.000</span>
                </div>
                <div class="risk-bar">
                  <div id="pri-bar" class="risk-fill bg-blue-500" style="width: 0%"></div>
                </div>
                <div class="text-sm text-gray-500 mt-1">
                  Physiological Resilience Index (0-1 scale)
                </div>
              </div>
              
              <!-- Classification -->
              <div class="mb-8">
                <div class="flex justify-between items-center mb-2">
                  <span class="text-gray-700 font-medium">Clinical Classification</span>
                  <span id="classification" class="text-2xl font-bold">--</span>
                </div>
                <div class="text-sm text-gray-600">
                  Based on PRI thresholds (Excellent ‚â•0.85, Good ‚â•0.70, Moderate ‚â•0.50, Poor <0.50)
                </div>
              </div>
              
              <!-- Risk Assessment -->
              <div class="mb-8">
                <div class="flex justify-between items-center mb-2">
                  <span class="text-gray-700 font-medium">Risk Assessment</span>
                  <span id="risk-level" class="text-xl font-bold">--</span>
                </div>
                <div class="risk-bar">
                  <div id="risk-bar" class="risk-fill" style="width: 0%"></div>
                </div>
              </div>
              
              <!-- Clinical Interpretation -->
              <div class="p-4 bg-gray-50 rounded-lg">
                <h4 class="font-bold text-gray-700 mb-2">üìã Clinical Interpretation</h4>
                <p id="interpretation" class="text-gray-600">
                  Analysis results will appear here.
                </p>
              </div>
              
              <!-- Technical Info - ÿ®ÿØŸäŸÑ API -->
              <div class="mt-6 p-4 bg-blue-50 rounded-lg border border-blue-200">
                <h4 class="font-bold text-gray-700 mb-2">üî¨ Technical Details</h4>
                <p class="text-sm text-gray-600">
                  This demo runs entirely in your browser using JavaScript. 
                  No data is sent to external servers - calculations happen locally.
                </p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>
  
  
  <!-- Download App Section -->
<section id="download-app" class="w-full py-16 px-6 bg-gradient-to-br from-gray-50 to-blue-50">
   
          <div class="space-y-3">
            <a href="/download/MOFNet_Clinical_Analyzer.apk" 
               download
               class="block w-full bg-green-500 hover:bg-green-600 text-white font-bold py-3 px-6 rounded-lg transition duration-300 shadow-lg hover:shadow-xl">
              <span class="flex items-center justify-center gap-2">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"/>
                </svg>
                Download APK
              </span>
            </a>
            
            <div class="text-xs text-gray-500 space-y-1">
              <p>üì¶ Version 1.0.2 ‚Ä¢ 5 MB</p>
              <p>üì± Android 5.0+</p>
              <p class="text-amber-600">‚ö†Ô∏è Enable "Unknown sources"</p>
            </div>
          </div>
        </div>

</section>


  <section id="about" class="w-full py-16 px-6">
    <div class="max-w-4xl mx-auto text-center">
      <h2 id="about-heading" class="text-4xl font-bold mb-6">About MOFNet</h2>
      <p id="about-text" class="text-lg opacity-90 leading-relaxed">
        Network-based ICU monitoring system predicting Multi-Organ Failure by analyzing inter-organ communication, Node Vulnerability Index (NVI), and early alert guidance.
      </p>
    </div>
  </section>

  <section id="contact" class="w-full py-16 px-6">
    <div class="max-w-4xl mx-auto">
      <h2 id="contact-heading" class="text-4xl font-bold text-center mb-12">Institutional Info</h2>
      <div class="grid md:grid-cols-3 gap-8">

        <!-- Network / Physiological Nodes -->
        <div class="contact-card p-6 rounded-xl text-center">
          <div class="mb-4 flex justify-center items-center">
            <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="#1E293B" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <circle cx="12" cy="12" r="10"/>
              <line x1="12" y1="2" x2="12" y2="22"/>
              <line x1="2" y1="12" x2="22" y2="12"/>
            </svg>
          </div>
          <h3 id="phone-label" class="font-bold text-lg mb-2">Network</h3>
          <p id="phone-number" class="opacity-80">Physiological Nodes</p>
        </div>

        <!-- Email -->
        <div class="contact-card p-6 rounded-xl text-center">
          <div class="mb-4 flex justify-center items-center">
            <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="#1E293B" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M4 4H20V20H4V4Z"/>
              <polyline points="4,4 12,14 20,4"/>
            </svg>
          </div>
          <h3 id="email-label" class="font-bold text-lg mb-2">Email</h3>
          <p id="email-address" class="opacity-80">info@mofnet.org</p>
        </div>

        <!-- Status -->
        <div class="contact-card p-6 rounded-xl text-center">
          <div class="mb-4 flex justify-center items-center">
            <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="#1E293B" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M12 2L15 8H21L16.5 12L18 18L12 14L6 18L7.5 12L3 8H9L12 2Z"/>
            </svg>
          </div>
          <h3 id="address-label" class="font-bold text-lg mb-2">Status</h3>
          <p id="address-text" class="opacity-80">Research Grade</p>
        </div>

      </div>
    </div>
  </section>

  <!-- FOOTER MODIFIED -->
  <footer id="footer" class="w-full py-8 px-6 text-center">
    <p id="footer-text" class="opacity-70 mb-2">¬© 2026 MOFNet. All rights reserved.</p>
    <p class="mb-2">
      <a href="https://emeraldcompass.github.io/mofnet/" style="color: #003399; text-decoration: none; margin: 0 0.5rem;">Documentation</a> |
      <a href="https://pypi.org/project/mofnet/" style="color: #003399; text-decoration: none; margin: 0 0.5rem;">PyPI</a> |
      <a href="https://github.com/emerladcompass/mofnet" style="color: #003399; text-decoration: none; margin: 0 0.5rem;">GitHub</a>
    </p>
    <p style="font-size: 0.9rem; color: #7f8c8d;">Designed by Emerald Compass Team</p>
  </footer>
</div>

<script>
const defaultConfig = {
  background_color: "#f0f9ff",
  nav_color: "#ffffff",
  primary_action_color: "#003399",
  text_color: "#1e293b",
  surface_color: "#ffffff",
  hospital_name: "MOFNet",
  tagline: "Testing across 4 tertiary care centers",
  hero_heading: "Clinically Validated",
  hero_subheading: "Lead Time: 11.3h | AUC: 0.893",
  cta_button: "View Documentation",
  services_heading: "Performance Metrics",
  service_1_title: "87.9%",
  service_1_desc: "Early MOF Detection Sensitivity",
  service_2_title: "1,328",
  service_2_desc: "Patients Validated",
  service_3_title: "11.3h",
  service_3_desc: "Median Early Warning Time",
  about_heading: "About MOFNet",
  about_text: "Network-based ICU monitoring system predicting Multi-Organ Failure by analyzing inter-organ communication, Node Vulnerability Index (NVI), and early alert guidance.",
  contact_heading: "Institutional Info",
  phone_label: "Network",
  phone_number: "Physiological Nodes",
  email_label: "Email",
  email_address: "info@mofnet.org",
  address_label: "Status",
  address_text: "Research Grade",
  footer_text: "¬© 2026 MOFNet Project. All rights reserved.",
  font_family: "Inter",
  font_size: 16
};

function onConfigChange(config) {
  config = config || defaultConfig;

  Object.keys(config).forEach(key => {
    if(config[key] !== undefined){
      defaultConfig[key] = config[key];
    }
  });

  document.getElementById('app').style.backgroundColor = config.background_color;
  document.getElementById('nav').style.backgroundColor = config.nav_color;
  document.getElementById('hero').style.backgroundColor = config.surface_color;
  document.getElementById('services').style.backgroundColor = config.background_color;
  document.getElementById('about').style.backgroundColor = config.surface_color;
  document.getElementById('contact').style.backgroundColor = config.background_color;
  document.getElementById('footer').style.backgroundColor = config.nav_color;

  document.getElementById('logo-bg').style.fill = config.primary_action_color;
  document.getElementById('logo-cross').style.stroke = config.surface_color;

  const buttons = [document.getElementById('cta-nav-button'), document.getElementById('cta-button')];
  buttons.forEach(btn => {
    btn.style.backgroundColor = config.primary_action_color;
    btn.style.color = config.surface_color;
  });

  document.getElementById('hospital-name').style.color = config.text_color;
  document.getElementById('tagline').style.color = config.text_color;
  document.getElementById('hero-heading').style.color = config.primary_action_color;
  document.getElementById('hero-subheading').style.color = config.text_color;
  document.getElementById('services-heading').style.color = config.text_color;
  
  document.getElementById('hospital-name').textContent = config.hospital_name;
  document.getElementById('tagline').textContent = config.tagline;
  document.getElementById('hero-heading').textContent = config.hero_heading;
  document.getElementById('hero-subheading').textContent = config.hero_subheading;
  document.getElementById('cta-button').textContent = config.cta_button;
  document.getElementById('cta-nav-button').textContent = config.cta_button;
  document.getElementById('services-heading').textContent = config.services_heading;
  document.getElementById('service-1-title').textContent = config.service_1_title;
  document.getElementById('service-1-desc').textContent = config.service_1_desc;
  document.getElementById('service-2-title').textContent = config.service_2_title;
  document.getElementById('service-2-desc').textContent = config.service_2_desc;
  document.getElementById('service-3-title').textContent = config.service_3_title;
  document.getElementById('service-3-desc').textContent = config.service_3_desc;
  document.getElementById('about-heading').textContent = config.about_heading;
  document.getElementById('about-text').textContent = config.about_text;
  document.getElementById('contact-heading').textContent = config.contact_heading;
  document.getElementById('phone-label').textContent = config.phone_label;
  document.getElementById('phone-number').textContent = config.phone_number;
  document.getElementById('email-label').textContent = config.email_label;
  document.getElementById('email-address').textContent = config.email_address;
  document.getElementById('address-label').textContent = config.address_label;
  document.getElementById('address-text').textContent = config.address_text;
  document.getElementById('footer-text').textContent = config.footer_text;
}

// MOFNet Demo Logic -  
function initMOFNetDemo() {
  const form = document.getElementById('mofnet-form');
  const analyzeBtn = document.getElementById('analyze-btn');
  
  if (!form) return;
  
  form.addEventListener('submit', async function(e) {
    e.preventDefault();
    
    // 
    const originalText = analyzeBtn.innerHTML;
    analyzeBtn.innerHTML = '‚è≥ Analyzing...';
    analyzeBtn.disabled = true;
    
    try {
      //
      const vitals = {
        hr: parseInt(document.getElementById('hr-input').value),
        sbp: parseInt(document.getElementById('sbp-input').value),
        dbp: parseInt(document.getElementById('dbp-input').value),
        rr: parseInt(document.getElementById('rr-input').value),
        spo2: parseInt(document.getElementById('spo2-input').value)
      };
      
      //  PRI 
      const result = await simulateMOFNetAnalysis(vitals);
      
      // 
      displayResults(result);
      
      //  
      document.getElementById('results-placeholder').classList.add('hidden');
      document.getElementById('results-container').classList.remove('hidden');
      
      //   
      document.getElementById('results-container').scrollIntoView({ 
        behavior: 'smooth',
        block: 'start'
      });
      
    } catch (error) {
      console.error('Analysis error:', error);
      alert('Error in analysis. Please check the inputs.');
    } finally {
      // 
      analyzeBtn.innerHTML = originalText;
      analyzeBtn.disabled = false;
    }
  });
  
  // 
  const inputs = form.querySelectorAll('input');
  inputs.forEach(input => {
    input.addEventListener('keypress', function(e) {
      if (e.key === 'Enter') {
        e.preventDefault();
        form.dispatchEvent(new Event('submit'));
      }
    });
  });
}

//   
function simulateMOFNetAnalysis(vitals) {
  return new Promise((resolve) => {
    //   
    setTimeout(() => {
      //  PRI
      const hr = vitals.hr;
      const sbp = vitals.sbp;
      const dbp = vitals.dbp;
      const rr = vitals.rr;
      const spo2 = vitals.spo2;
      
      //  
      const hr_n = Math.max(0, 1 - Math.abs(hr - 72) / 100);
      const bp_n = Math.max(0, 1 - Math.abs((sbp + dbp * 2) / 3 - 93) / 100);
      const rr_n = Math.max(0, 1 - Math.abs(rr - 16) / 30);
      const spo2_n = Math.max(0, (spo2 - 80) / 20);
      
      //  PRI
      const pri = (hr_n + bp_n + rr_n + spo2_n) / 4;
      const roundedPri = Math.round(pri * 1000) / 1000;
      
      // 
      let classification;
      if (roundedPri >= 0.85) {
        classification = "Excellent";
      } else if (roundedPri >= 0.70) {
        classification = "Good";
      } else if (roundedPri >= 0.50) {
        classification = "Moderate";
      } else {
        classification = "Poor";
      }
      
      //  
      let riskLevel;
      if (roundedPri >= 0.70) {
        riskLevel = "Low";
      } else if (roundedPri >= 0.50) {
        riskLevel = "Medium";
      } else {
        riskLevel = "High";
      }
      
      //  
      let interpretation;
      if (classification === "Excellent") {
        interpretation = "Patient demonstrates excellent physiological resilience. Continue routine monitoring and current treatment plan.";
      } else if (classification === "Good") {
        interpretation = "Good physiological resilience. Monitor for any changes and consider routine follow-up.";
      } else if (classification === "Moderate") {
        interpretation = "Moderate risk detected. Consider increasing monitoring frequency and review current interventions.";
      } else {
        interpretation = "High risk of multi-organ dysfunction. Immediate clinical review and potential intervention recommended.";
      }
      
      resolve({
        pri: roundedPri,
        classification: classification,
        riskLevel: riskLevel,
        interpretation: interpretation,
        vitals: vitals
      });
    }, 800);
  });
}

// 
function displayResults(result) {
  // 
  document.getElementById('pri-score').textContent = result.pri;
  document.getElementById('pri-bar').style.width = `${result.pri * 100}%`;
  
  //  
  const classificationEl = document.getElementById('classification');
  classificationEl.textContent = result.classification;
  
  //  
  if (result.classification === "Excellent") {
    classificationEl.className = "text-2xl font-bold risk-low";
  } else if (result.classification === "Good") {
    classificationEl.className = "text-2xl font-bold risk-low";
  } else if (result.classification === "Moderate") {
    classificationEl.className = "text-2xl font-bold risk-medium";
  } else {
    classificationEl.className = "text-2xl font-bold risk-high";
  }
  
  //   
  const riskLevelEl = document.getElementById('risk-level');
  riskLevelEl.textContent = result.riskLevel;
  
  if (result.riskLevel === "Low") {
    riskLevelEl.className = "text-xl font-bold risk-low";
    document.getElementById('risk-bar').className = "risk-fill risk-low";
    document.getElementById('risk-bar').style.width = "30%";
  } else if (result.riskLevel === "Medium") {
    riskLevelEl.className = "text-xl font-bold risk-medium";
    document.getElementById('risk-bar').className = "risk-fill risk-medium";
    document.getElementById('risk-bar').style.width = "60%";
  } else {
    riskLevelEl.className = "text-xl font-bold risk-high";
    document.getElementById('risk-bar').className = "risk-fill risk-high";
    document.getElementById('risk-bar').style.width = "90%";
  }
  
  //  
  document.getElementById('interpretation').textContent = result.interpretation;
}

//  
document.addEventListener('DOMContentLoaded', function() {
  onConfigChange();
  initMOFNetDemo();
  
  //  
  const ctaButton = document.getElementById('cta-button');
  const ctaNavButton = document.getElementById('cta-nav-button');
  
  if (ctaButton) {
    ctaButton.addEventListener('click', function() {
      window.open('https://pypi.org/project/mofnet/', '_blank');
    });
  }
  
  if (ctaNavButton) {
    ctaNavButton.addEventListener('click', function() {
      window.open('https://emeraldcompass.github.io/mofnet/', '_blank');
    });
  }
});

if (window.elementSdk) {
  window.elementSdk.init({
    defaultConfig,
    onConfigChange,
    mapToCapabilities: (cfg) => ({ 
      recolorables: [], 
      fontEditable: {
        get: () => cfg.font_family, 
        set: (v) => { cfg.font_family = v; }
      }, 
      fontSizeable: {
        get: () => cfg.font_size, 
        set: (v) => { cfg.font_size = v; }
      } 
    }),
    mapToEditPanelValues: (cfg) => new Map(Object.entries(cfg))
  });
}
</script>

<script defer src="pwa-installer.js"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {
  if ('serviceWorker' in navigator) { navigator.serviceWorker.register('service-worker.js');
  }
});
</script>  <!-- 2 -->
</body>
</html>